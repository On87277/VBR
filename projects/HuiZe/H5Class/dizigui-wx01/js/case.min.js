var zsLen=[9,10,21,19,11,15,15,24,18,9,16,6,11,9,9,8,5,17,12,17,11,34,20,8,10,18,11,15,18,10];var qtLen=[4,4,4,6,2,6,4,5,4,4,3,4,4,4,4,4,4,3,4,4,4,7,3,3,4,4,2,4,4,2];var CASE=(function(){function f(g){this.caseNum=3;this.ldStr="";this.labArr=[[],[],[]];this.imgUrlArr=[[],[],[]];this.mediaArr=[[],[],[]];this.isPlay=false;this.obj=g;this.obj.on("tap",this.onCase);this.init();this.setting()}var e;var a=f.prototype;var b;var d;var c;a.init=function(){$("#myPopup").find("img").eq(0).attr("src",zhUrl+"res/case/img/yuanwen/L"+lesson+"-1.png");$("#myPopup").find("img").eq(1).attr("src",zhUrl+"res/case/img/yuanwen/L"+lesson+"-2.png");num=1;e=this;d=$(".btn_zs").css("top");c=$(".btn_zs").css("left");e.ldStr="<img class=ldimg src="+zhUrl+"res/case/img/langdu/L"+lesson+'-1.png><div class="ldYW"><img class=horn1 id=a'+lesson+" src="+zhUrl+"res/case/img/langdu/L"+lesson+".png></div>";for(b=0;b<zsLen[lesson-1];b++){e.imgUrlArr[0].push(zhUrl+"res/case/img/zhushi/L"+lesson+"-"+[b+1]+".png");e.mediaArr[0].push(zhUrl+"res/case/music/zhushi/L"+lesson+"-"+[b+1]+".mp3")}for(b=0;b<e.imgUrlArr[0].length;b++){if(b==0){e.labArr[0]+='<div class="page" id=page'+[b+1]+"><img class=horn id="+["a"+b]+" src="+e.imgUrlArr[0][b]+"></div>"}else{e.labArr[0]+='<div class="page" id=page'+[b+1]+' style="display:none"><img class=horn id='+["a"+b]+" src="+e.imgUrlArr[0][b]+"></div>"}}for(b=0;b<qtLen[lesson-1];b++){e.imgUrlArr[1].push(zhUrl+"res/case/img/jinyi/L"+lesson+"-"+[b+1]+".png");e.mediaArr[1].push(zhUrl+"res/case/music/jinyi/L"+lesson+"-"+[b+1]+".mp3")}for(b=0;b<e.imgUrlArr[1].length;b++){if(b==0){e.labArr[1]+='<div class="page" id=page'+[b+1]+"><img class=horn id="+["a"+b]+" src="+e.imgUrlArr[1][b]+"></div>"}else{e.labArr[1]+='<div class="page" id=page'+[b+1]+' style="display:none"><img class=horn id='+["a"+b]+" src="+e.imgUrlArr[1][b]+"></div>"}}for(b=0;b<qtLen[lesson-1];b++){e.imgUrlArr[2].push(zhUrl+"res/case/img/yingyi/L"+lesson+"-"+[b+1]+".png");e.mediaArr[2].push(zhUrl+"res/case/music/yingyi/L"+lesson+"-"+[b+1]+".mp3")}for(b=0;b<e.imgUrlArr[2].length;b++){if(b==0){e.labArr[2]+='<div class="page" id=page'+[b+1]+"><img class=horn id="+["a"+b]+" src="+e.imgUrlArr[2][b]+"></div>"}else{e.labArr[2]+='<div class="page" id=page'+[b+1]+' style="display:none"><img class=horn id='+["a"+b]+" src="+e.imgUrlArr[2][b]+"></div>"}}$(".media").on("play",function(g){$(".btn_sy").attr("src",zhUrl+"img/sk.gif");$(".btn_dlb").attr("src",zhUrl+"img/laba.gif")});$(".media").on("ended",function(g){e.audioStop()})};a.setting=function(){$(".lx_page").css("marginBottom","1%");var g=$(".btn_zs").draggabilly({containment:true});e.loadCase(3);$("#rightSideCon").animate({left:"81%"});$(".btn_zuo").hide();$(".btn_you").show();st=setTimeout(function(){$("#rightSideCon").animate({left:"101.6%"});$(".btn_you").hide();$(".btn_zuo").show()},5000)};a.onCase=function(i){if(isHeng){return}var h=i.target.name;if(h=="btn_zuo"){$(".ckM").trigger("play");i.preventDefault();$("#rightSideCon").animate({left:"81%"});$(".btn_zuo").hide();$(".btn_you").show();clearTimeout(st);st=setTimeout(function(){$("#rightSideCon").animate({left:"101.6%"});$(".btn_you").hide();$(".btn_zuo").show()},3000)}else{if(h=="btn_you"){$(".ckM").trigger("play");i.preventDefault();clearTimeout(st);$("#rightSideCon").animate({left:"101.6%"});$(".btn_you").hide();$(".btn_zuo").show()}else{if(h=="btn_ld"){$(".ckM").trigger("play");e.loadCase(3)}else{if(h=="btn_zhus"){$(".ckM").trigger("play");e.loadCase(0)}else{if(h=="btn_jy"){$(".ckM").trigger("play");e.loadCase(1)}else{if(h=="btn_yy"){$(".ckM").trigger("play");e.loadCase(2)}else{if(h=="btn_sy"){$(".ckM").trigger("play");if(e.isPlay){e.audioStop()}else{var g=i.target.id.substr(1);$(".media").attr("src",e.mediaArr[e.caseNum][g]);e.audioPlay()}}else{if(h=="btn_dlb"){$(".ckM").trigger("play");if(e.isPlay){e.audioStop()}else{$(".media").attr("src",zhUrl+"res/case/music/langdu/L"+lesson+".mp3");e.audioPlay()}}else{if(h=="btn_zs"){$(".ckM").trigger("play");if(e.caseNum==0){$("#myPopup").find("img").eq(1).hide();$("#myPopup").find("img").eq(0).show()}else{$("#myPopup").find("img").eq(0).hide();$("#myPopup").find("img").eq(1).show()}$("#myPopup").popup("open")}}}}}}}}}};a.loadCase=function(g){e.audioStop();$(".btn_next,.btn_prev").hide();$("#rightSideCon").find("a").prop("disabled",false).removeClass("jinyong");$(".btn_ld").css("background-image","url("+zhUrl+"img/langdu.png) ");$(".btn_zhus").css("background-image","url("+zhUrl+"img/zhushi.png) ");$(".btn_jy").css("background-image","url("+zhUrl+"img/jinyi.png) ");$(".btn_yy").css("background-image","url("+zhUrl+"img/yingyi.png) ");clearTimeout(st);$("#rightSideCon").animate({left:"101.6%"});$(".btn_you").hide();$(".btn_zuo").show();e.caseNum=g;if(g!=3){$(".btn_dlb").hide();$("#rightSideCon").find("a").eq(g+3).prop("disabled",true).addClass("jinyong");if(g==0){$(".btn_zhus").css("background-image","url("+zhUrl+"img/zhushiD.png)")}if(g==1){$(".btn_jy").css("background-image","url("+zhUrl+"img/jinyiD.png)")}if(g==2){$(".btn_yy").css("background-image","url("+zhUrl+"img/yingyiD.png)")}e.initCaseMou()}else{$(".lx_page").hide();$(".btn_dlb").show();$(".btn_ld").css("background-image","url("+zhUrl+"img/langduD.png)");$(".btn_ld").prop("disabled",true).addClass("jinyong");$("#moduleCont").html("");$("#moduleCont").append(e.ldStr);if(isIos){$(".ldYW").css("height","2.8rem");$(".btn_dlb").css("marginTop","-195%")}else{$(".ldYW").css("height","2.5rem");$(".btn_dlb").css("marginTop","-175%")}$("#moduleCont").show();$("#moduleCont").fadeIn();$(".btn_sy").hide();$(".btn_zs").hide()}e.loadingCase()};a.loadingCase=function(){$(".lx_page").hide();$(".loaders").show();$("#caseCon").hide();var g=$("#moduleCont").find("img").length;$("#moduleCont").find("img").load(function(){g--;if(g>0){return}else{$(".loaders").hide();$("#caseCon").show();if(e.caseNum<3){$(".media").attr("src",e.mediaArr[e.caseNum][0]);e.audioPlay();selectFlip();$(".lx_page").html("1/"+$(".page").length);$(".lx_page").show()}else{$(".media").attr("src",zhUrl+"res/case/music/langdu/L"+lesson+".mp3");e.audioPlay()}}})};a.initCaseMou=function(){$("#moduleCont").html("");$("#moduleCont").append(e.labArr[e.caseNum]);$("#moduleCont").show();$("#moduleCont").fadeIn();$(".btn_sy").show();$(".btn_zs").css("top",d);$(".btn_zs").css("left",c);if(isIos){$(".btn_zs").css("top","3rem")}$(".btn_zs").show();$(".page").each(function(){$(this).on("swipeleft",swLeft);$(this).on("swiperight",swRight)})};a.audioPlay=function(){e.isPlay=true;$(".media").trigger("load");$(".media").trigger("play")};a.audioStop=function(){e.isPlay=false;$(".media").trigger("pause");$(".btn_dlb").attr("src",zhUrl+"img/laba2.png");$(".btn_sy").attr("src",zhUrl+"img/sg.png")};a.unloadCASE=function(){$("#myPopup").popup("close");$(".media").unbind();$(".page").unbind();e.obj.unbind();clearTimeout(st);$("#rightSideCon").find("a").prop("disabled",false).removeClass("ui-disabled");$("#rightSideCon").animate({left:"101.6%"});$(".btn_you").hide();$(".btn_zuo").show();$("#moduleCont").html("");e.audioStop();$("#caseCon").hide();$(".lx_page").hide()};return f})();